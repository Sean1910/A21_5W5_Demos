@model IEnumerable<CrazyBook_Models.Book>

@{ Layout = "~/Views/Shared/_Layout.cshtml"; }
<br />
<br />
<div class="border p-4 bg-white">
  <div class="row">
    <div class="col-8">
      <h2 class="text-info">Our Books</h2>
    </div>
    <div class=" col-2 text-right">
      <a asp-action="Create" class="btn btn-info form-control"> Create New </a>
    </div>
  </div>
  <br />
  <div>
    @if (Model.Count() > 0)
    {
<table class="table table-light table-striped border">
  <tr class="table-secondary">
    <th>
      Title
    </th>
    <th>
      Subject
    </th>
    <th>
      Price
    </th>
    <th>
      Publisher
    </th>
    <th>
      Authors
    </th>
    <th></th>
  </tr>
  @foreach (var item in Model)
  {
<tr>
  <td>
    @item.Title
  </td>
  <td>
    @item.Subject.Name
  </td><td>
    @item.Price
  </td>
  <td>
    @item.Publisher.Name
  </td>
  <td>
    @{ var authList = ""; }
    @foreach (var auth in item.AuthorsBooks)
    {
      authList += @auth.Author.LastName + ", ";
    }
    @authList.Trim().TrimEnd(',')
  </td>
  <td>
    <a class="btn btn-primary text-white" asp-action="Update" asp-route-Id="@item.Id">
      Edit
    </a>
    <a class="btn btn-info text-white" asp-action="Details" asp-route-Id="@item.Id">
      Details
    </a>
    <a class="btn btn-danger text-white" asp-action="Delete" asp-route-Id="@item.Id">
      Delete
    </a>
    <a class="btn btn-success text-white" asp-action="ManageAuthors" asp-route-Id="@item.Id">
      Authors
    </a>

  </td>
</tr>}
</table> }
else
{
<p>No Book in the list...</p>}
  </div>
</div>
